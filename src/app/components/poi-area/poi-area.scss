// poi-area.component.scss - COMPLETE BATIK THEME
@use '@angular/material' as mat;

// ====================================================================
// üå∏ BATIK THEME VARIABLES (Consistent dengan main theme)
// ====================================================================
:root {
  --batik-pink: #E91E63;
  --batik-pink-light: #FCE4EC;
  --batik-pink-dark: #AD1457;
  --batik-white: #FFFFFF;
  --batik-off-white: #FAFAFA;
  --batik-black: #212121;
  --batik-gray: #757575;
  --batik-light-gray: #EEEEEE;
  --batik-shadow: rgba(233, 30, 99, 0.1);
  --batik-gradient: linear-gradient(135deg, #E91E63 0%, #AD1457 100%);
  --batik-gradient-soft: linear-gradient(135deg, #FCE4EC 0%, #FFFFFF 100%);
  --batik-gradient-reverse: linear-gradient(135deg, #AD1457 0%, #E91E63 100%);
}

// ====================================================================
// üì± MAIN POI PAGE CONTAINER
// ====================================================================
.poi-page-container {
  width: 100vw;
  height: 100vh;
  background: var(--batik-gradient-soft);
  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
  overflow: hidden;
  position: relative;

  // ‚úÖ Batik pattern overlay
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23E91E63' fill-opacity='0.02'%3E%3Ccircle cx='20' cy='20' r='4'/%3E%3Ccircle cx='40' cy='40' r='6'/%3E%3Ccircle cx='20' cy='40' r='3'/%3E%3Ccircle cx='40' cy='20' r='5'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
    pointer-events: none;
    z-index: 1;
  }

  > * {
    position: relative;
    z-index: 2;
  }
}

// ====================================================================
// üéØ HEADER TOOLBAR
// ====================================================================
mat-toolbar {
  &.mat-toolbar {
    background: var(--batik-gradient) !important;
    color: var(--batik-white) !important;
    box-shadow: 0 4px 20px rgba(233, 30, 99, 0.25) !important;
    border-bottom: 2px solid var(--batik-pink-dark);
    position: relative;
    overflow: hidden;

    // ‚úÖ Batik pattern in header
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.08'%3E%3Cpath d='M20 20c0 11.046-8.954 20-20 20v20h40V20H20z'/%3E%3C/g%3E%3C/svg%3E") repeat;
      z-index: 1;
    }

    .back-button,
    .page-title,
    mat-icon {
      position: relative;
      z-index: 2;
    }

    .back-button {
      color: var(--batik-white) !important;
      margin-right: 16px;
      transition: all 0.3s ease;

      &:hover {
        background: rgba(255, 255, 255, 0.1) !important;
        transform: translateX(-2px);
      }
    }

    .page-title {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .spacer {
      flex: 1 1 auto;
    }
  }
}

// ====================================================================
// üìã CONTENT WRAPPER
// ====================================================================
.content-wrapper {
  height: calc(100vh - 64px);
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 24px;

  // ‚úÖ Custom batik scrollbar
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    background: var(--batik-pink-light);
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: var(--batik-gradient);
    border-radius: 4px;
    border: 1px solid var(--batik-white);

    &:hover {
      background: var(--batik-gradient-reverse);
    }
  }
}

// ====================================================================
// üó∫Ô∏è COORDINATE INPUT CARD
// ====================================================================
.coordinate-input-card {
  &.mat-mdc-card {
    background: var(--batik-white) !important;
    border-radius: 16px !important;
    box-shadow: 
      0 8px 32px rgba(233, 30, 99, 0.12),
      0 4px 16px rgba(0, 0, 0, 0.08) !important;
    border: 1px solid var(--batik-pink-light);
    overflow: visible;
    position: relative;

    // ‚úÖ Decorative corner elements
    &::before {
      content: '';
      position: absolute;
      top: 12px;
      right: 12px;
      width: 40px;
      height: 40px;
      background: var(--batik-gradient);
      border-radius: 50%;
      opacity: 0.1;
      z-index: 1;
    }

    &::after {
      content: '';
      position: absolute;
      bottom: 12px;
      left: 12px;
      width: 24px;
      height: 24px;
      background: var(--batik-pink-light);
      border-radius: 50%;
      z-index: 1;
    }

    .mat-mdc-card-header {
      position: relative;
      z-index: 2;
      padding: 20px 24px 16px;
      background: var(--batik-gradient-soft);
      border-radius: 16px 16px 0 0;
      margin: -16px -16px 16px -16px;
      
      .mat-mdc-card-title {
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--batik-pink-dark) !important;
        font-size: 18px !important;
        font-weight: 600 !important;
        margin: 0 !important;

        .title-icon {
          font-size: 24px;
          color: var(--batik-pink);
        }
      }

      .mat-mdc-card-subtitle {
        color: var(--batik-gray) !important;
        font-size: 14px !important;
        margin: 8px 0 0 36px !important;
        font-style: italic;
      }
    }

    .mat-mdc-card-content {
      position: relative;
      z-index: 2;
      padding: 0 24px 24px !important;
    }
  }
}

// ====================================================================
// üìê COORDINATE FORM
// ====================================================================
.coordinate-form {
  display: flex;
  flex-direction: column;
  gap: 24px;

  .coordinates-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      gap: 16px;
    }
  }

  .date-range {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      gap: 16px;
    }
  }

  .data-type-field {
    grid-column: 1 / -1;
  }

  // ‚úÖ Material Form Field Styling
  .mat-mdc-form-field {
    &.mat-form-field-appearance-outline {
      
      .mat-mdc-text-field-wrapper {
        .mat-mdc-form-field-outline {
          .mat-mdc-form-field-outline-start,
          .mat-mdc-form-field-outline-notch,
          .mat-mdc-form-field-outline-end {
            border-color: var(--batik-pink-light) !important;
            border-width: 2px !important;
          }
        }

        &:hover .mat-mdc-form-field-outline {
          .mat-mdc-form-field-outline-start,
          .mat-mdc-form-field-outline-notch,
          .mat-mdc-form-field-outline-end {
            border-color: var(--batik-pink) !important;
          }
        }

        &.mdc-text-field--focused .mat-mdc-form-field-outline {
          .mat-mdc-form-field-outline-start,
          .mat-mdc-form-field-outline-notch,
          .mat-mdc-form-field-outline-end {
            border-color: var(--batik-pink) !important;
          }
        }
      }

      .mat-mdc-form-field-label {
        color: var(--batik-gray) !important;
        font-weight: 500 !important;

        &.mat-mdc-form-field-label-floating {
          color: var(--batik-pink) !important;
        }
      }

      .mat-mdc-input-element {
        color: var(--batik-black) !important;
        font-weight: 500 !important;

        &::placeholder {
          color: var(--batik-gray) !important;
          opacity: 0.7;
        }
      }

      &.mat-form-field-invalid {
        .mat-mdc-text-field-wrapper .mat-mdc-form-field-outline {
          .mat-mdc-form-field-outline-start,
          .mat-mdc-form-field-outline-notch,
          .mat-mdc-form-field-outline-end {
            border-color: #f44336 !important;
          }
        }
      }
    }
  }

  // ‚úÖ Select field dengan icon
  .mat-mdc-select {
    .mat-mdc-select-value {
      display: flex !important;
      align-items: center !important;
      gap: 8px !important;
      
      .option-icon {
        color: var(--batik-pink) !important;
        font-size: 18px !important;
      }

      .option-label {
        font-weight: 500 !important;
      }
    }
  }

  // ‚úÖ Action buttons
  .action-buttons {
    display: flex;
    gap: 16px;
    justify-content: center;
    margin-top: 8px;

    @media (max-width: 768px) {
      flex-direction: column;
      gap: 12px;
    }

    .mat-mdc-raised-button {
      min-width: 140px;
      height: 44px;
      border-radius: 12px !important;
      font-weight: 600 !important;
      letter-spacing: 0.5px !important;
      text-transform: none !important;
      position: relative;
      overflow: hidden;

      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
      }

      &:hover::before {
        left: 100%;
      }

      &.quick-count-btn {
        background: var(--batik-gradient-soft) !important;
        color: var(--batik-pink) !important;
        border: 2px solid var(--batik-pink-light) !important;

        &:hover {
          background: var(--batik-pink-light) !important;
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(233, 30, 99, 0.25) !important;
        }
      }

      &.analyze-btn {
        background: var(--batik-gradient) !important;
        color: var(--batik-white) !important;

        &:hover {
          background: var(--batik-gradient-reverse) !important;
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(233, 30, 99, 0.3) !important;
        }
      }

      &:disabled {
        background: var(--batik-light-gray) !important;
        color: var(--batik-gray) !important;
        cursor: not-allowed;
        transform: none !important;
      }
    }
  }
}

// ====================================================================
// üìä ANALYSIS RESULTS CARD
// ====================================================================
.analysis-results-card {
  &.mat-mdc-card {
    background: var(--batik-white) !important;
    border-radius: 16px !important;
    box-shadow: 
      0 8px 32px rgba(233, 30, 99, 0.12),
      0 4px 16px rgba(0, 0, 0, 0.08) !important;
    border: 2px solid var(--batik-pink-light);
    overflow: hidden;
    position: relative;
    
    // ‚úÖ Success glow effect
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--batik-gradient);
      z-index: 3;
    }

    .mat-mdc-card-header {
      background: var(--batik-gradient-soft);
      padding: 20px 24px 16px;
      margin: -16px -16px 16px -16px;
      
      .mat-mdc-card-title {
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--batik-pink-dark) !important;
        font-size: 18px !important;
        font-weight: 600 !important;

        .title-icon {
          font-size: 24px;
          color: var(--batik-pink);
        }
      }
    }

    .mat-mdc-card-content {
      padding: 0 24px 24px !important;
    }
  }

  .analysis-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 24px;

    @media (max-width: 768px) {
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    @media (max-width: 480px) {
      grid-template-columns: 1fr;
    }
  }

  .analysis-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px;
    background: var(--batik-gradient-soft);
    border-radius: 12px;
    border: 1px solid var(--batik-pink-light);
    transition: all 0.3s ease;

    &:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(233, 30, 99, 0.15);
    }

    .analysis-icon {
      font-size: 32px;
      color: var(--batik-pink);
      padding: 12px;
      background: var(--batik-white);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(233, 30, 99, 0.1);
    }

    .analysis-content {
      flex: 1;

      h3 {
        margin: 0 0 4px 0;
        font-size: 24px;
        font-weight: 700;
        color: var(--batik-pink-dark);
        font-family: 'Roboto Mono', monospace;
      }

      p {
        margin: 0;
        font-size: 13px;
        color: var(--batik-gray);
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
    }
  }

  // ‚úÖ Recommendations section
  .recommendations {
    background: rgba(233, 30, 99, 0.05);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 24px;
    border: 1px solid var(--batik-pink-light);

    h4 {
      margin: 0 0 16px 0;
      font-size: 16px;
      font-weight: 600;
      color: var(--batik-pink-dark);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .recommendation-chips {
      margin-bottom: 16px;

      .mat-mdc-chip-option {
        background: var(--batik-white) !important;
        color: var(--batik-pink) !important;
        border: 1px solid var(--batik-pink-light) !important;
        margin-right: 8px !important;
        margin-bottom: 8px !important;
        border-radius: 20px !important;

        .mat-icon {
          color: var(--batik-pink) !important;
        }

        &.mat-mdc-chip-selected {
          background: var(--batik-gradient) !important;
          color: var(--batik-white) !important;

          .mat-icon {
            color: var(--batik-white) !important;
          }
        }
      }
    }

    .suggestion {
      margin: 0;
      font-size: 14px;
      color: var(--batik-gray);
      font-style: italic;
      line-height: 1.5;
    }
  }

  // ‚úÖ Download buttons
  .download-buttons {
    display: flex;
    gap: 16px;
    justify-content: center;

    @media (max-width: 768px) {
      flex-direction: column;
      gap: 12px;
    }

    .download-btn {
      flex: 1;
      max-width: 200px;
      height: 48px;
      border-radius: 12px !important;
      font-weight: 600 !important;
      text-transform: none !important;
      position: relative;
      overflow: hidden;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      gap: 8px !important;

      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.6s ease;
      }

      &:hover::before {
        left: 100%;
      }

      .size-hint {
        font-size: 11px;
        opacity: 0.8;
        font-weight: 400;
        margin-left: 4px;
      }

      .size-warning {
        font-size: 11px;
        font-weight: 400;
        margin-left: 4px;
        color: rgba(255, 255, 255, 0.7);
      }

      &.pdf-btn {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
        color: var(--batik-white) !important;

        &:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3) !important;
        }

        &:disabled {
          background: var(--batik-light-gray) !important;
          color: var(--batik-gray) !important;
        }
      }

      &.csv-btn {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%) !important;
        color: var(--batik-white) !important;

        &:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3) !important;
        }
      }
    }
  }
}

// ====================================================================
// üìà PROGRESS SECTION
// ====================================================================
.progress-section {
  &.mat-mdc-card {
    background: var(--batik-white) !important;
    border-radius: 16px !important;
    box-shadow: 
      0 8px 32px rgba(233, 30, 99, 0.12),
      0 4px 16px rgba(0, 0, 0, 0.08) !important;
    border: 2px solid var(--batik-pink-light);
    position: relative;
    overflow: hidden;

    // ‚úÖ Animated progress glow
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--batik-gradient);
      animation: progressGlow 2s ease-in-out infinite;
      z-index: 3;
    }

    .mat-mdc-card-header {
      background: var(--batik-gradient-soft);
      padding: 16px 24px;
      margin: -16px -16px 16px -16px;
      
      .mat-mdc-card-title {
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--batik-pink-dark) !important;
        font-size: 16px !important;
        font-weight: 600 !important;

        .title-icon {
          font-size: 20px;
          color: var(--batik-pink);
          animation: spin 1s linear infinite;
        }
      }
    }

    .mat-mdc-card-content {
      padding: 0 24px 24px !important;
    }
  }

  .mat-mdc-progress-bar {
    height: 8px !important;
    border-radius: 4px !important;
    background-color: var(--batik-pink-light) !important;
    overflow: hidden;

    .mat-mdc-progress-bar-fill::after {
      background: var(--batik-gradient) !important;
    }

    &.mat-warn .mat-mdc-progress-bar-fill::after {
      background: linear-gradient(135deg, #f44336 0%, #e57373 100%) !important;
    }
  }

  .progress-details {
    margin-top: 16px;

    .progress-message {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      color: var(--batik-black);
      margin-bottom: 16px;
      font-weight: 500;

      .stage-icon {
        font-size: 20px;
        color: var(--batik-pink);
        
        &.error {
          color: #f44336;
        }
      }
    }

    .progress-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;

      .stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background: var(--batik-gradient-soft);
        border-radius: 8px;
        border: 1px solid var(--batik-pink-light);

        .label {
          font-size: 12px;
          color: var(--batik-gray);
          font-weight: 500;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .value {
          font-size: 14px;
          color: var(--batik-pink-dark);
          font-weight: 600;
          font-family: 'Roboto Mono', monospace;
        }
      }
    }
  }
}

// ====================================================================
// ‚úÖ DOWNLOAD SUMMARY
// ====================================================================
.download-summary {
  &.mat-mdc-card {
    background: linear-gradient(135deg, #e8f5e8 0%, #f0fdf4 100%) !important;
    border-radius: 16px !important;
    box-shadow: 
      0 8px 32px rgba(34, 197, 94, 0.12),
      0 4px 16px rgba(0, 0, 0, 0.08) !important;
    border: 2px solid #86efac;

    .mat-mdc-card-header {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      color: white !important;
      padding: 16px 24px;
      margin: -16px -16px 16px -16px;
      
      .mat-mdc-card-title {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 16px !important;
        font-weight: 600 !important;

        .title-icon {
          font-size: 20px;
          animation: checkPulse 0.6s ease-out;
        }
      }
    }

    .mat-mdc-card-content {
      padding: 0 24px 24px !important;
    }
  }

  .summary-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
    margin-bottom: 20px;

    .summary-item {
      text-align: center;
      padding: 16px;
      background: rgba(34, 197, 94, 0.1);
      border-radius: 12px;
      border: 1px solid #86efac;

      h3 {
        margin: 0 0 8px 0;
        font-size: 24px;
        font-weight: 700;
        color: #15803d;
        font-family: 'Roboto Mono', monospace;
      }

      p {
        margin: 0;
        font-size: 13px;
        color: #16a34a;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
    }
  }

  .download-info {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: rgba(34, 197, 94, 0.05);
    border-radius: 12px;
    font-size: 14px;
    color: #15803d;
    border: 1px solid #bbf7d0;

    mat-icon {
      color: #22c55e;
    }
  }
}

// ====================================================================
// ‚ùì HELP CARD
// ====================================================================
.help-card {
  &.mat-mdc-card {
    background: var(--batik-white) !important;
    border-radius: 16px !important;
    box-shadow: 
      0 8px 32px rgba(233, 30, 99, 0.08),
      0 4px 16px rgba(0, 0, 0, 0.06) !important;
    border: 1px solid var(--batik-pink-light);

    .mat-mdc-card-header {
      background: var(--batik-gradient-soft);
      padding: 16px 24px;
      margin: -16px -16px 16px -16px;
      
      .mat-mdc-card-title {
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--batik-pink-dark) !important;
        font-size: 16px !important;
        font-weight: 600 !important;

        .title-icon {
          font-size: 20px;
          color: var(--batik-pink);
        }
      }
    }

    .mat-mdc-card-content {
      padding: 0 24px 24px !important;
    }
  }

  .help-steps {
    margin-bottom: 24px;

    .help-step {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 16px;
      padding: 12px;
      background: var(--batik-gradient-soft);
      border-radius: 12px;
      border: 1px solid var(--batik-pink-light);

      .step-icon {
        font-size: 24px;
        color: var(--batik-pink);
        padding: 8px;
        background: var(--batik-white);
        border-radius: 50%;
        flex-shrink: 0;
      }

      p {
        margin: 8px 0 0 0;
        font-size: 14px;
        color: var(--batik-black);
        line-height: 1.5;

        strong {
          color: var(--batik-pink-dark);
          font-weight: 600;
        }
      }
    }
  }

  .help-tips {
    background: rgba(255, 193, 7, 0.1);
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #ffeb3b;

    h4 {
      margin: 0 0 16px 0;
      font-size: 16px;
      font-weight: 600;
      color: #f57c00;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    ul {
      margin: 0;
      padding-left: 20px;

      li {
        margin-bottom: 8px;
        font-size: 14px;
        color: #ef6c00;
        line-height: 1.5;

        strong {
          font-weight: 600;
        }
      }
    }
  }

  .form-actions {
    text-align: center;
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid var(--batik-pink-light);

    .reset-btn {
      background: var(--batik-white) !important;
      color: var(--batik-pink) !important;
      border: 2px solid var(--batik-pink-light) !important;
      border-radius: 12px !important;
      padding: 12px 24px !important;
      font-weight: 600 !important;
      text-transform: none !important;

      &:hover {
        background: var(--batik-pink-light) !important;
        border-color: var(--batik-pink) !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(233, 30, 99, 0.2) !important;
      }
    }
  }
}

// ====================================================================
// üé® ANIMATIONS & KEYFRAMES
// ====================================================================
@keyframes progressGlow {
  0%, 100% {
    opacity: 0.8;
    transform: scaleX(1);
  }
  50% {
    opacity: 1;
    transform: scaleX(1.02);
  }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes checkPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// ====================================================================
// üì± RESPONSIVE DESIGN
// ====================================================================
@media (max-width: 1200px) {
  .content-wrapper {
    padding: 16px;
    gap: 20px;
  }

  .coordinate-input-card,
  .analysis-results-card,
  .progress-section,
  .download-summary,
  .help-card {
    .mat-mdc-card-content {
      padding: 0 20px 20px !important;
    }
  }
}

@media (max-width: 768px) {
  .content-wrapper {
    padding: 12px;
    gap: 16px;
  }

  .coordinate-input-card,
  .analysis-results-card,
  .progress-section,
  .download-summary,
  .help-card {
    .mat-mdc-card-header {
      padding: 16px 20px 12px;
      margin: -16px -16px 12px -16px;

      .mat-mdc-card-title {
        font-size: 16px !important;
      }
    }

    .mat-mdc-card-content {
      padding: 0 16px 16px !important;
    }
  }

  .analysis-grid .analysis-item {
    padding: 16px;
    
    .analysis-icon {
      font-size: 28px;
    }

    .analysis-content h3 {
      font-size: 20px;
    }
  }
}

@media (max-width: 480px) {
  mat-toolbar .page-title {
    font-size: 16px !important;
  }

  .content-wrapper {
    padding: 8px;
    gap: 12px;
  }

  .analysis-grid {
    grid-template-columns: 1fr !important;
    gap: 12px;
  }

  .analysis-item {
    flex-direction: column;
    text-align: center;
    gap: 12px;

    .analysis-content h3 {
      font-size: 18px;
    }
  }

  .download-buttons {
    .download-btn {
      height: 44px;
      font-size: 14px !important;
    }
  }

  .help-steps .help-step {
    flex-direction: column;
    text-align: center;
    gap: 12px;
  }
}

// ====================================================================
// üîß MATERIAL COMPONENT OVERRIDES
// ====================================================================
::ng-deep {
  // ‚úÖ Snackbar theming
  .snack-success {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%) !important;
    color: white !important;
  }

  .snack-error {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
    color: white !important;
  }

  .snack-warning {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%) !important;
    color: white !important;
  }

  .snack-info {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
    color: white !important;
  }

  // ‚úÖ Datepicker theming
  .mat-datepicker-popup {
    .mat-calendar {
      font-family: 'Roboto', sans-serif !important;
    }

    .mat-calendar-body-selected {
      background-color: var(--batik-pink) !important;
      color: var(--batik-white) !important;
    }

    .mat-calendar-body-today:not(.mat-calendar-body-selected) {
      border-color: var(--batik-pink) !important;
    }
  }

  // ‚úÖ Select dropdown theming
  .mat-mdc-select-panel {
    background: var(--batik-white) !important;
    border: 1px solid var(--batik-pink-light) !important;
    border-radius: 8px !important;

    .mat-mdc-option {
      &.mdc-list-item--selected {
        background: var(--batik-gradient-soft) !important;
      }

      &:hover {
        background: var(--batik-pink-light) !important;
      }

      .option-icon {
        color: var(--batik-pink) !important;
        margin-right: 8px;
      }
    }
  }

  // ‚úÖ Chip list theming
  .mat-mdc-chip-listbox {
    .mat-mdc-chip-option {
      transition: all 0.3s ease !important;

      &:hover {
        transform: translateY(-1px) !important;
        box-shadow: 0 4px 12px rgba(233, 30, 99, 0.2) !important;
      }
    }
  }
}

// ====================================================================
// üéØ UTILITY CLASSES
// ====================================================================
.batik-gradient-bg {
  background: var(--batik-gradient) !important;
}

.batik-gradient-text {
  background: var(--batik-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.batik-shadow {
  box-shadow: 0 4px 16px var(--batik-shadow) !important;
}

.batik-hover-lift {
  transition: transform 0.3s ease, box-shadow 0.3s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px var(--batik-shadow);
  }
}

.text-truncate {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out;
}

// ====================================================================
// üî• HIGH CONTRAST MODE SUPPORT
// ====================================================================
@media (prefers-contrast: high) {
  :root {
    --batik-shadow: rgba(0, 0, 0, 0.3);
  }

  .coordinate-input-card,
  .analysis-results-card,
  .progress-section,
  .download-summary,
  .help-card {
    &.mat-mdc-card {
      border-width: 2px !important;
    }
  }

  .mat-mdc-form-field.mat-form-field-appearance-outline {
    .mat-mdc-text-field-wrapper .mat-mdc-form-field-outline {
      .mat-mdc-form-field-outline-start,
      .mat-mdc-form-field-outline-notch,
      .mat-mdc-form-field-outline-end {
        border-width: 3px !important;
      }
    }
  }
}

// ====================================================================
// ‚ôø ACCESSIBILITY IMPROVEMENTS
// ====================================================================
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// Focus indicators
.mat-mdc-raised-button:focus,
.mat-mdc-form-field:focus-within {
  outline: 2px solid var(--batik-pink) !important;
  outline-offset: 2px !important;
}
// Add to poi-area.component.scss
// ====================================================================
// üìã STEP INDICATOR
// ====================================================================
.step-indicator {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
  padding: 20px;
  background: var(--batik-gradient-soft);
  border-radius: 12px;
  border: 1px solid var(--batik-pink-light);

  @media (max-width: 768px) {
    flex-direction: column;
    gap: 12px;
  }

  .step {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: var(--batik-gray);
    transition: all 0.3s ease;

    mat-icon {
      font-size: 20px;
      color: var(--batik-gray);
    }

    &.completed {
      color: var(--batik-pink-dark);
      font-weight: 600;

      mat-icon {
        color: #22c55e;
      }
    }

    &.available {
      color: var(--batik-pink);
      
      mat-icon {
        color: var(--batik-pink);
        animation: pulse 2s infinite;
      }
    }
  }
}

// ====================================================================
// üì• DOWNLOAD SECTION - ALWAYS VISIBLE
// ====================================================================
.download-section {
  &.mat-mdc-card {
    background: var(--batik-white) !important;
    border-radius: 16px !important;
    box-shadow: 
      0 8px 32px rgba(233, 30, 99, 0.12),
      0 4px 16px rgba(0, 0, 0, 0.08) !important;
    border: 2px solid var(--batik-pink-light);

    .mat-mdc-card-header {
      background: var(--batik-gradient-soft);
      padding: 20px 24px 16px;
      margin: -16px -16px 16px -16px;
      
      .mat-mdc-card-title {
        display: flex;
        align-items: center;
        gap: 12px;
        color: var(--batik-pink-dark) !important;
        font-size: 18px !important;
        font-weight: 600 !important;

        .title-icon {
          font-size: 24px;
          color: var(--batik-pink);
        }
      }

      .mat-mdc-card-subtitle {
        color: var(--batik-gray) !important;
        font-size: 14px !important;
        margin: 8px 0 0 36px !important;
      }
    }

    .mat-mdc-card-content {
      padding: 0 24px 24px !important;
    }
  }

  .download-buttons {
    display: flex;
    gap: 16px;
    justify-content: center;
    margin-bottom: 20px;

    @media (max-width: 768px) {
      flex-direction: column;
      gap: 12px;
    }

    .download-btn {
      flex: 1;
      max-width: 250px;
      height: 56px;
      border-radius: 12px !important;
      font-weight: 600 !important;
      text-transform: none !important;
      position: relative;
      overflow: hidden;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      gap: 8px !important;

      .btn-text {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      &:disabled {
        opacity: 0.6;
        
        .btn-text {
          color: var(--batik-gray) !important;
        }
      }

      &.pdf-btn {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important;
        color: var(--batik-white) !important;

        &:not(:disabled):hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(220, 53, 69, 0.3) !important;
        }
      }

      &.csv-btn {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%) !important;
        color: var(--batik-white) !important;

        &:not(:disabled):hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(40, 167, 69, 0.3) !important;
        }
      }
    }
  }

  .download-instructions {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 16px;
    background: rgba(255, 193, 7, 0.1);
    border-radius: 12px;
    border: 1px solid #ffeb3b;

    mat-icon {
      color: #f57c00;
      font-size: 24px;
      margin-top: 4px;
    }

    p {
      margin: 0;
      color: #ef6c00;
      font-size: 14px;
      line-height: 1.6;

      strong {
        color: #bf360c;
        display: block;
        margin-bottom: 8px;
      }
    }
  }
}

// ‚úÖ Animation for available step
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}
